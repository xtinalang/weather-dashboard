{% extends "base.html" %}

{% block title %}Weather Dashboard - Home{% endblock %}

{% block content %}
<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<div class="section">
    <h2>Search for Location</h2>

    <!-- Search Form -->
    <form action="{{ url_for('search') }}" method="post">
        {{ search_form.csrf_token }}
        <div>
            {{ search_form.query.label }}
            {{ search_form.query(placeholder="Enter city name") }}
        </div>
        <div>
            <p>Temperature Unit:</p>
            <label>
                <input type="radio" name="unit" value="C" {% if unit_form.unit.default == 'C' %}checked{% endif %}> Celsius (째C)
            </label>
            <label>
                <input type="radio" name="unit" value="F" {% if unit_form.unit.default == 'F' %}checked{% endif %}> Fahrenheit (째F)
            </label>
        </div>
        <div>
            {{ search_form.submit(class="btn") }}
        </div>
    </form>
</div>

<div class="section">
    <h2>Location Entry</h2>

    <!-- Location Form -->
    <form action="{{ url_for('ui_location') }}" method="post">
        {{ ui_form.csrf_token }}
        <div>
            {{ ui_form.location.label }}
            {{ ui_form.location(placeholder="e.g., London, Tokyo, New York") }}
        </div>

        <div>
            <p>Temperature Unit:</p>
            <label>
                <input type="radio" name="unit" value="C" {% if unit_form.unit.default == 'C' %}checked{% endif %}> Celsius (째C)
            </label>
            <label>
                <input type="radio" name="unit" value="F" {% if unit_form.unit.default == 'F' %}checked{% endif %}> Fahrenheit (째F)
            </label>
        </div>

        <div>
            {{ ui_form.submit(class="btn") }}
        </div>
    </form>
</div>


<!-- Favorite Locations -->
{% if favorites %}
<div class="favorites">
    <h2>Favorite Locations</h2>
    {% for location in favorites %}
        <div class="favorite-item">
            <a href="{{ url_for('weather_path', coordinates=location.latitude ~ '/' ~ location.longitude) }}">
                {{ location.name }}{% if location.region %}, {{ location.region }}{% endif %} ({{ location.country }})
            </a>
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- Quick Links -->
<div class="section">
    <h2>Popular Cities</h2>
    <div class="quick-links">
        <form action="{{ url_for('ui_location') }}" method="post" style="display: inline-block; margin: 5px;">
            {{ ui_form.csrf_token }}
            <input type="hidden" name="location" value="London">
            <input type="hidden" name="unit" value="C">
            <button type="submit" class="btn">London</button>
        </form>
        <form action="{{ url_for('ui_location') }}" method="post" style="display: inline-block; margin: 5px;">
            {{ ui_form.csrf_token }}
            <input type="hidden" name="location" value="New York">
            <input type="hidden" name="unit" value="C">
            <button type="submit" class="btn">New York</button>
        </form>
        <form action="{{ url_for('ui_location') }}" method="post" style="display: inline-block; margin: 5px;">
            {{ ui_form.csrf_token }}
            <input type="hidden" name="location" value="Tokyo">
            <input type="hidden" name="unit" value="C">
            <button type="submit" class="btn">Tokyo</button>
        </form>
        <form action="{{ url_for('ui_location') }}" method="post" style="display: inline-block; margin: 5px;">
            {{ ui_form.csrf_token }}
            <input type="hidden" name="location" value="Sydney">
            <input type="hidden" name="unit" value="C">
            <button type="submit" class="btn">Sydney</button>
        </form>
    </div>
</div>
{% endblock %}
